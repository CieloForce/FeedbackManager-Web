<div style="height: 3px; position: fixed; width: 100%;">
    <p-progressBar *ngIf="loading" mode="indeterminate" [style]="{ height: '3px' }"></p-progressBar>
</div>

<div style="max-width: 480px; margin: auto;">
    <p-card header="Enviar Feedback" class="m-4">
        <div class="flex justify-content-center flex-wrap">
            <p-button icon="pi pi-thumbs-up" iconPos="right" label="Elogio"
                styleClass="p-button-raised p-button-text p-button-success"
                class="flex align-items-center justify-content-center m-2" (click)="elogioClicked()"></p-button>
            <p-button icon="pi pi-question" iconPos="right" label="Sugestão"
                styleClass="p-button-raised p-button-text p-button-warning"
                class="flex align-items-center justify-content-center m-2" (click)="sugestaoClicked()"></p-button>
            <p-button icon="pi pi-exclamation-triangle" iconPos="right" label="Crítica"
                styleClass="p-button-raised p-button-text p-button-danger"
                class="flex align-items-center justify-content-center m-2" (click)="criticaClicked()"></p-button>
        </div>
    </p-card>
    
    <p-card header="Feedback Info" class="m-4">
        <div class="mb-4">
            <h3>Status das Filas</h3>
            <p-chart id="stacked-bar-chart" type="bar" [data]="stackedData" [options]="stackedOptions" height="150px"></p-chart>
        </div>
        <div style="text-align: center; color: #777">
            Total de <b>{{totalSize}}</b> feedbacks em fila.
        </div>

        <p-table [value]="messages" dataKey="name" [tableStyle]="{ 'min-width': '60rem' }">
            <ng-template pTemplate="body" let-message let-expanded="expanded">
                <tr>
                    <td>
                        <button type="button" pButton pRipple [pRowToggler]="message"
                            class="p-button-text p-button-rounded p-button-plain"
                            [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
                    </td>
                    <td>{{ message.MessageId }}</td>
                </tr>
            </ng-template>
            <ng-template pTemplate="rowexpansion" let-message>
                <tr>
                    <td>
                        {{ message.body }}
                    </td>
                </tr>
            </ng-template>
        </p-table>
        <div class="my-4">
            <h3>Resumo por Tipo</h3>
            <p-chart id="pie-chart" type="doughnut" [data]="pieData" [options]="pieOptions" height="200px"></p-chart>
        </div>
    </p-card>
</div>
